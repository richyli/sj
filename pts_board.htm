<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•¬è«‹éˆé•·é‘’æ ¸</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts for specific styling (optional, using system fonts fallback) -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        .font-serif {
            font-family: 'Noto Serif TC', 'KaiTi', 'BiaoKai', 'DFKai-SB', serif;
        }
        
        /* Animation classes */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        
        .inner-shadow {
            box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06);
        }
    </style>
</head>
<body class="bg-[#d4c5b0] text-slate-800 selection:bg-amber-200">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icon Components (Replaced Lucide-react imports with SVGs) ---
        const CheckCircle = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
        );

        const XCircle = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
        );

        const Vote = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m9 12 2 2 4-4"/><path d="M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z"/><path d="M22 19H2"/></svg>
        );

        const RefreshCw = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M3 21v-5h5"/></svg>
        );

        // --- Main Application ---
        const PTSBoardSimulator = () => {
            // Game State
            const [gameState, setGameState] = useState('intro'); // intro, playing, result, summary
            const [round, setRound] = useState(1);
            const [passedCount, setPassedCount] = useState(0); 
            const [history, setHistory] = useState([]); 
            const [roundPairs, setRoundPairs] = useState([]); // Array of 14 pairs
            const [roundResult, setRoundResult] = useState(null);

            // Constants
            const TOTAL_ROUNDS = 14;
            const TARGET_PASSED = 10; 

            // --- Data Generators ---

            const firstNames = ['é™³', 'æ—', 'é»ƒ', 'å¼µ', 'æ', 'ç‹', 'å³', 'åŠ‰', 'è”¡', 'æ¥Š', 'è¨±', 'é„­', 'è¬', 'æ´ª', 'éƒ­', 'é‚±', 'æ›¾', 'å»–', 'è³´', 'å¾'];
            const lastNames = ['å®‰', 'å¹³', 'è¯', 'æ–‡', 'å¼·', 'ç¾', 'å„€', 'å±±', 'æ˜', 'å®', 'å“²', 'ç‘‹', 'å©·', 'å›', 'å‚‘', 'è±ª', 'è–‡', 'å¯§', 'è»’', 'å‡±', 'ä¿¡', 'ç¾©', 'å’Œ', 'å¹³'];

            const professions = [
                { title: 'æ–°èå‚³æ’­å­¸è€…', icon: 'ğŸ“', experiences: ['åœ‹ç«‹å¤§å­¸æ–°èç³»æ•™æˆï¼Œå°ˆé•·åª’é«”å€«ç†', 'ç§ç«‹å¤§å­¸å‚³æ’­å­¸é™¢é™¢é•·ï¼Œè‘—ä½œç­‰èº«', 'è³‡æ·±åª’é«”è§€å¯Ÿå®¶ï¼Œå¸¸ç™¼è¡¨è©•è«–'] },
                { title: 'è³‡æ·±é›»è¦–è£½ä½œäºº', icon: 'ğŸ“º', experiences: ['æ›¾ç²ä¸‰åº§é‡‘é˜çï¼Œè£½ä½œéå¤šéƒ¨è†¾ç‚™äººå£åŠ‡é›†', 'å•†æ¥­é›»è¦–å°ç¯€ç›®éƒ¨ç¸½ç›£ï¼Œæ“…é•·ç¶œè—èˆ‡æˆ²åŠ‡', 'ç¨ç«‹è£½ä½œäººï¼Œå°ˆæ³¨æ–¼é«˜å“è³ªå¯¦å¢ƒç¯€ç›®'] },
                { title: 'ç´€éŒ„ç‰‡å°æ¼”', icon: 'ğŸ¥', experiences: ['åœ‹éš›å½±å±•å¸¸å‹è»ï¼Œé•·æœŸé—œæ³¨ç”Ÿæ…‹è­°é¡Œ', 'å°ˆæ³¨æ–¼ç¤¾æœƒé‹å‹•ç´€éŒ„ï¼Œé¢¨æ ¼çŠ€åˆ©', 'è³‡æ·±äººæ–‡ç´€å¯¦å°æ¼”ï¼Œä½œå“å…·æ·±åšæ–‡å­¸æ€§'] },
                { title: 'è—æ–‡ç•Œäººå£«', icon: 'ğŸ¨', experiences: ['åœ‹å®¶ç´šè¡¨æ¼”è—è¡“åœ˜é«”ç¸½ç›£', 'çŸ¥åç­–å±•äººï¼Œå…·å‚™åœ‹éš›è—è¡“ç¶²çµ¡', 'ç•¶ä»£è—è¡“å®¶ï¼Œæ›¾ä»£è¡¨å°ç£åƒåŠ é›™å¹´å±•'] },
                { title: 'ç§‘æŠ€/æ•¸ä½å°ˆå®¶', icon: 'ğŸ’»', experiences: ['æ–°å‰µå…¬å¸å‰µè¾¦äººï¼Œå°ˆé•·å¤§æ•¸æ“šåˆ†æ', 'è³‡æ·±è»Ÿé«”å·¥ç¨‹å¸«ï¼Œæ¨å‹•æ•¸ä½è½‰å‹', 'ç¶²è·¯åª’é«”å¹³å°å‰µè¾¦äººï¼Œç†Ÿæ‚‰æ–°åª’é«”ç”Ÿæ…‹'] },
                { title: 'NGO/å…¬æ°‘ä»£è¡¨', icon: 'âš–ï¸', experiences: ['äººæ¬Šå¾‹å¸«ï¼Œé•·æœŸæ‰¶åŠ©å¼±å‹¢', 'ç’°å¢ƒä¿è­·åœ˜é«”åŸ·è¡Œé•·ï¼Œæ¨å‹•æ°¸çºŒç™¼å±•', 'æ•™è‚²åŸºé‡‘æœƒè‘£äº‹ï¼Œé—œæ³¨å…’å°‘æ¬Šç›Š'] },
                { title: 'åª’é«”ç¶“ç‡Ÿç®¡ç†è€…', icon: 'ğŸ’¼', experiences: ['å‰å ±ç¤¾ç¸½ç·¨è¼¯ï¼Œæ“æœ‰30å¹´å ±æ¥­è³‡æ­·', 'è·¨åœ‹åª’é«”é›†åœ˜äºå¤ªå€ç¸½è£', 'å…¬ç‡Ÿåª’é«”å‰ä»»é«˜éšä¸»ç®¡'] },
                { title: 'çŸ¥åä¼æ¥­å®¶', icon: 'ğŸ¢', experiences: ['è·¨åœ‹ç§‘æŠ€é›†åœ˜å‰µè¾¦äººï¼Œå…·å…¨çƒè¦–é‡', 'å‚³çµ±ç”¢æ¥­è½‰å‹æ¨æ‰‹ï¼Œæ·±è€•æœ¬åœŸæ–‡åŒ–', 'ä¸Šå¸‚æ«ƒå…¬å¸è‘£äº‹é•·ï¼Œç†Ÿç¨”è²¡å‹™æ²»ç†'] },
            ];

            // Stance definitions
            const stances = [
                { type: 'green', label: 'åç¶  (æœ¬åœŸç«‹å ´)', color: 'text-green-700', bg: 'bg-green-100', border: 'border-green-300' },
                { type: 'neutral', label: 'ä¸­æ€§ (å°ˆæ¥­å„ªå…ˆ)', color: 'text-gray-700', bg: 'bg-gray-100', border: 'border-gray-300' },
                { type: 'blue', label: 'åè— (æ³›è—èƒŒæ™¯)', color: 'text-blue-700', bg: 'bg-blue-100', border: 'border-blue-300' },
                { type: 'kmt_rec', label: 'è—ç‡Ÿæ¨è–¦äººé¸', color: 'text-indigo-800', bg: 'bg-indigo-100', border: 'border-indigo-300' },
            ];

            // Random Name Generator
            const generateName = () => {
                return firstNames[Math.floor(Math.random() * firstNames.length)] + lastNames[Math.floor(Math.random() * lastNames.length)];
            };

            // Generate 14 Pairs of Candidates
            const generateGameData = () => {
                const pairs = [];
                const usedNames = new Set();
                
                // Pools for generation logic
                const bluePool = stances.filter(s => s.type === 'blue' || s.type === 'kmt_rec');
                const otherPool = stances.filter(s => s.type === 'green' || s.type === 'neutral');

                for (let i = 0; i < TOTAL_ROUNDS; i++) {
                    const prof = professions[Math.floor(Math.random() * professions.length)];
                    
                    let stance1 = bluePool[Math.floor(Math.random() * bluePool.length)];
                    let stance2 = otherPool[Math.floor(Math.random() * otherPool.length)];

                    // --- Determine Passability Scenario for this Round ---
                    const roll = Math.random();
                    let prob1, prob2; 
                    let trait1 = "", trait2 = ""; 

                    if (roll < 0.5) {
                        // Scenario A: Blue Safe, Green Risky
                        prob1 = 0.85; 
                        prob2 = 0.1;
                        trait1 = "æ›¾ä»»å…¬æœƒç†äº‹é•·ï¼Œè™•äº‹åœ“èï¼Œäººè„ˆå»£é—Šã€‚";
                        trait2 = "é•·æœŸæŠ•å…¥ç¤¾æœƒé‹å‹•ï¼Œä¸»å¼µé®®æ˜ï¼Œæ€§æ ¼å¼·çƒˆã€‚";
                    } else if (roll < 0.8) {
                        // Scenario B: Blue Flawed, Green/Neutral Safe
                        prob1 = 0.2;
                        prob2 = 0.85;
                        trait1 = "é »ç¹æŠ•æ›¸åª’é«”é‡è²¶æ™‚æ”¿ï¼Œè¨€è©çŠ€åˆ©ï¼Œä½œé¢¨å¼·å‹¢ã€‚";
                        trait2 = "å°ˆæ³¨æœ¬æ¥­ç™¼å±•ï¼Œé®®å°‘å…¬é–‹è©•è«–æ”¿æ²»ï¼Œå½¢è±¡æº«å’Œã€‚";
                    } else {
                        // Scenario C: Both Safe
                        prob1 = 0.8;
                        prob2 = 0.8;
                        trait1 = "æ¥­ç•Œè¼©åˆ†æ¥µé«˜ï¼Œå‚™å—æ•¬é‡ï¼Œç´ æœ‰æ¸…æœ›ã€‚";
                        trait2 = "é•·æœŸè€•è€˜å…¬ç›Šèˆ‡å°ˆæ¥­é ˜åŸŸï¼Œç¤¾æœƒå½¢è±¡è‰¯å¥½ã€‚";
                    }

                    // Helper to create candidate object
                    const createCand = (st, prob, trait) => {
                        let name = generateName();
                        while(usedNames.has(name)) name = generateName();
                        usedNames.add(name);

                        const expBase = prof.experiences[Math.floor(Math.random() * prof.experiences.length)];
                        // Years: 15 to 30
                        const years = Math.floor(Math.random() * 16) + 15; 
                        const desc = `${expBase}ï¼Œè³‡æ­·ç´„ ${years} å¹´ã€‚`;
                        
                        // Base political description
                        let polDescBase = "";
                        if (st.type === 'green') polDescBase = "èˆ‡åŸ·æ”¿é»¨é—œä¿‚å¯†åˆ‡ã€‚";
                        else if (st.type === 'neutral') polDescBase = "å¼·èª¿åª’é«”å…¬å…±æ€§ã€‚";
                        else if (st.type === 'blue') polDescBase = "è¢«è¦–ç‚ºæ³›è—äººé¸ã€‚";
                        else if (st.type === 'kmt_rec') polDescBase = "ã€åœ‹æ°‘é»¨åœ˜æ¨è–¦ã€‘ã€‚";

                        return {
                            name,
                            title: prof.title,
                            icon: prof.icon,
                            stance: { ...st },
                            prob: prob,
                            description: desc,
                            polDescription: polDescBase + trait, 
                            years: years
                        };
                    };

                    // Randomize who appears left or right
                    if (Math.random() > 0.5) {
                        pairs.push([createCand(stance1, prob1, trait1), createCand(stance2, prob2, trait2)]);
                    } else {
                        pairs.push([createCand(stance2, prob2, trait2), createCand(stance1, prob1, trait1)]);
                    }
                }

                return pairs;
            };

            // --- Game Actions ---

            const startGame = () => {
                setRoundPairs(generateGameData());
                setGameState('playing');
                setRound(1);
                setPassedCount(0);
                setHistory([]);
                setRoundResult(null);
            };

            const handleVote = (candidate) => {
                let prob = candidate.prob;
                
                const roll = Math.random();
                const isPass = roll < prob;
                
                let votes = 0;
                let reason = "";

                if (isPass) {
                    // Pass Logic
                    votes = Math.floor(Math.random() * 5) + 10; 
                    if (votes > 15) votes = 15;
                    
                    if (candidate.prob > 0.7) reason = "æ¢ä»¶å„ªç•°ï¼Œé †åˆ©ç²å¾—è·¨é»¨æ´¾å§”å“¡æ”¯æŒã€‚";
                    else reason = "é©šéšªéé—œï¼Œéƒ¨åˆ†å§”å“¡å«æ·šæŠ•ç¥¨ã€‚";

                } else {
                    // Fail Logic
                    if (candidate.prob < 0.3) {
                        if (candidate.stance.type === 'green') reason = "æ”¿æ²»è‰²å½©éé‡ï¼Œé­åœ¨é‡é»¨é›†é«”å°æ®ºã€‚";
                        else if (candidate.stance.type === 'blue' || candidate.stance.type === 'kmt_rec') reason = "å€‹äººçˆ­è­°éå¤§ï¼Œé­åŸ·æ”¿é»¨èˆ‡éƒ¨åˆ†å§”å“¡å¦æ±ºã€‚";
                        else reason = "è³‡æ­·æˆ–ä»£è¡¨æ€§å—åˆ°è³ªç–‘ï¼Œæœªèƒ½éé—œã€‚";
                        votes = Math.floor(Math.random() * 4) + 6; // 6-9 votes
                    } else {
                        reason = "æ„å¤–è½é¦¬ï¼æŠ•ç¥¨éç¨‹ç™¼ç”Ÿçªç™¼ç‹€æ³ã€‚";
                        votes = 9;
                    }
                }

                const result = {
                    candidate,
                    isPass,
                    votes,
                    reason
                };

                setRoundResult(result);
                if (isPass) setPassedCount(p => p + 1);
                setHistory(prev => [...prev, { round, ...result }]);
            };

            const nextRound = () => {
                if (round >= TOTAL_ROUNDS) {
                    setGameState('summary');
                } else {
                    setRound(r => r + 1);
                    setRoundResult(null);
                }
            };

            // --- UI Components ---

            const TableHeader = () => {
                return (
                    <div className="bg-white/90 backdrop-blur-sm p-4 rounded-b-xl shadow-md border-t-0 border-x border-b border-amber-900/20 mb-6 mx-auto max-w-xl">
                        <div className="flex justify-between items-end mb-2">
                            <div>
                                <span className="text-xs font-bold text-amber-800 uppercase tracking-wider block">Round</span>
                                <span className="text-2xl font-serif font-bold text-slate-800">{round} <span className="text-sm text-slate-400">/ {TOTAL_ROUNDS}</span></span>
                            </div>
                            <div className="text-right">
                                <span className="text-xs font-bold text-amber-800 uppercase tracking-wider block">Status</span>
                                <span className={`text-2xl font-serif font-bold ${passedCount >= 10 ? 'text-green-600' : 'text-slate-700'}`}>
                                    {passedCount} <span className="text-sm text-slate-400">/ 10 å¸­</span>
                                </span>
                            </div>
                        </div>
                        <div className="flex gap-1 justify-center">
                            {Array.from({length: TOTAL_ROUNDS}).map((_, i) => {
                                const hItem = history.find(h => h.round === i + 1);
                                let colorClass = 'bg-slate-200';
                                if (i + 1 === round) colorClass = 'bg-amber-400 ring-2 ring-amber-200 scale-110';
                                if (hItem) {
                                    colorClass = hItem.isPass ? 'bg-green-500' : 'bg-red-400';
                                }
                                return <div key={i} className={`w-3 h-3 rounded-full transition-all ${colorClass}`}></div>
                            })}
                        </div>
                    </div>
                );
            };

            const CandidateCard = ({ candidate, onClick }) => {
                return (
                <button 
                    onClick={onClick}
                    className="group relative w-full aspect-[1.7/1] bg-white rounded shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 overflow-hidden text-left flex flex-col"
                    style={{ fontFamily: '"Noto Serif TC", "KaiTi", serif' }} 
                >
                    <div className={`h-2 w-full ${candidate.stance.bg.replace('bg-', 'bg-')}`} style={{backgroundColor: candidate.stance.type === 'green' ? '#166534' : candidate.stance.type === 'blue' ? '#1e40af' : candidate.stance.type === 'kmt_rec' ? '#3730a3' : '#525252'}}></div>

                    <div className="p-5 flex-1 flex flex-col relative">
                        {/* Top Row: Title Left, Stance Right */}
                        <div className="flex justify-between items-start mb-2">
                            <div className="text-amber-900/80 font-bold text-sm tracking-widest border-b border-amber-900/20 pb-1">
                                {candidate.title}
                            </div>
                            <div className={`text-xs px-2 py-1 rounded border font-bold shadow-sm ${candidate.stance.color} ${candidate.stance.border} bg-white z-10`}>
                                {candidate.stance.label}
                            </div>
                        </div>

                        {/* Center: Name & Icon */}
                        <div className="flex-1 flex flex-col justify-center items-center py-1">
                            <div className="text-5xl opacity-10 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none">
                                {candidate.icon}
                            </div>
                            <div className="text-4xl font-bold text-slate-900 tracking-[0.2em] ml-2 mb-1 z-10 relative">
                                {candidate.name}
                            </div>
                        </div>

                        {/* Bottom Right: Description */}
                        <div className="mt-auto text-right">
                            <div className="text-sm text-slate-600 font-sans leading-snug max-w-[95%] ml-auto">
                                <p className="mb-1">{candidate.description}</p>
                                <p className={`${candidate.stance.color} font-bold`}>{candidate.polDescription}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div className="absolute inset-0 bg-amber-500/0 group-hover:bg-amber-500/5 pointer-events-none transition-colors" />
                </button>
                );
            };

            return (
                <div className="relative max-w-3xl mx-auto px-4 py-6 min-h-screen flex flex-col">
                    {/* Wood Texture Overlay simulation */}
                    <div className="fixed inset-0 opacity-10 pointer-events-none" style={{ backgroundImage: 'url("data:image/svg+xml,%3Csvg width=\'100\' height=\'100\' viewBox=\'0 0 100 100\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cfilter id=\'noise\'%3E%3CfeTurbulence type=\'fractalNoise\' baseFrequency=\'0.8\' numOctaves=\'3\' stitchTiles=\'stitch\'/%3E%3C/filter%3E%3Crect width=\'100\' height=\'100\' filter=\'url(%23noise)\' opacity=\'0.5\'/%3E%3C/svg%3E")', zIndex: 0 }}></div>

                    {/* Game Area */}
                    {gameState === 'playing' && (
                        <div className="flex-1 flex flex-col z-10">
                            <TableHeader />
                            
                            {!roundResult ? (
                                <div className="flex-1 flex flex-col justify-center animate-fade-in">
                                    <div className="text-center mb-6">
                                        <h2 className="text-xl font-bold text-amber-900 drop-shadow-sm font-serif">æœ¬é¡æåäººé¸</h2>
                                        <p className="text-amber-800/70 text-sm">ç¶“å‘è·è©•ä¼°ï¼Œæ­¤é¡è‡³å°‘æœ‰ä¸€ä½å¯å¯©æŸ¥é€šéï¼Œæ•¬è«‹éˆé•·é‘’æ ¸</p>
                                    </div>
                                    
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-8 px-2">
                                        {roundPairs[round-1].map((c, idx) => (
                                            <div key={idx} className="transform hover:scale-105 transition-transform duration-300">
                                                <CandidateCard candidate={c} onClick={() => handleVote(c)} />
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            ) : (
                                <div className="flex-1 flex flex-col justify-center items-center animate-fade-in">
                                    <div className="bg-white p-8 rounded-lg shadow-2xl max-w-md w-full text-center border-4 border-double border-amber-900/20 relative overflow-hidden">
                                        <div className={`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-9xl font-black opacity-10 rotate-[-15deg] pointer-events-none ${roundResult.isPass ? 'text-green-600' : 'text-red-600'}`}>
                                            {roundResult.isPass ? 'PASS' : 'FAIL'}
                                        </div>

                                        <div className="mb-4 flex justify-center">
                                            {roundResult.isPass ? 
                                                <CheckCircle className="w-20 h-20 text-green-600 drop-shadow-md" /> : 
                                                <XCircle className="w-20 h-20 text-red-600 drop-shadow-md" />
                                            }
                                        </div>
                                        
                                        <h3 className="text-2xl font-bold font-serif mb-2">
                                            {roundResult.isPass ? 'æåé€šé' : 'æåé§å›'}
                                        </h3>
                                        <p className="text-slate-500 mb-2 font-serif text-lg">
                                            {roundResult.candidate.name} {roundResult.candidate.title}
                                        </p>
                                        
                                        {/* Reason Display */}
                                        <div className="mb-6 px-4 py-2 bg-amber-50 rounded border border-amber-100 text-amber-900 font-bold">
                                            ã€Œ{roundResult.reason}ã€
                                        </div>

                                        <div className="bg-slate-100 p-4 rounded-md mb-6 inner-shadow">
                                            <div className="flex justify-between items-center mb-2 text-sm font-bold text-slate-600">
                                                <span>åŒæ„ç¥¨æ•¸</span>
                                                <span>{roundResult.votes} / 15</span>
                                            </div>
                                            <div className="w-full bg-slate-300 h-3 rounded-full overflow-hidden">
                                                <div 
                                                    className={`h-full ${roundResult.isPass ? 'bg-green-500' : 'bg-red-500'}`} 
                                                    style={{width: `${(roundResult.votes/15)*100}%`}}
                                                ></div>
                                            </div>
                                        </div>

                                        <button 
                                            onClick={nextRound}
                                            className="w-full bg-slate-800 hover:bg-slate-900 text-amber-50 font-bold py-3 rounded shadow-lg transition-colors font-serif tracking-widest"
                                        >
                                            {round >= TOTAL_ROUNDS ? 'æŸ¥çœ‹æœ€çµ‚çµæœ' : 'ä¸‹ä¸€è¼ªæå'}
                                        </button>
                                    </div>
                                </div>
                            )}
                        </div>
                    )}

                    {/* Intro Screen */}
                    {gameState === 'intro' && (
                        <div className="flex-1 flex items-center justify-center p-4 z-10">
                            <div className="bg-white p-8 rounded-lg shadow-2xl border-t-8 border-amber-800 max-w-lg w-full">
                                <h1 className="text-4xl font-black text-center mb-2 text-slate-800 font-serif tracking-widest">å…¬è¦–è‘£äº‹æœƒ</h1>
                                <h2 className="text-xl text-center mb-8 text-amber-700 font-serif">æåæ¨¡æ“¬æˆ°</h2>
                                
                                <div className="space-y-6 text-slate-600 font-sans leading-relaxed">
                                    <p>
                                        <strong>ä»»å‹™ç›®æ¨™ï¼š</strong>
                                        æœ¬æ¬¡æååå–®å»£ç´ç™¾å·ï¼Œæ¶µè“‹å­¸è¡“ã€è—æ–‡ã€åª’é«”ã€ä¼æ¥­èˆ‡ç§‘æŠ€ç•Œã€‚è‘£äº‹æœƒå…±15å¸­ï¼Œæ‰£é™¤å“¡å·¥è‘£äº‹ï¼Œä½ å¿…é ˆåœ¨ <span className="text-red-600 font-bold">14è¼ª</span> æåä¸­ï¼ŒæˆåŠŸé€šéè‡³å°‘ <span className="text-green-600 font-bold">10ä½</span> è‘£äº‹ã€‚
                                    </p>
                                    <div>
                                        <strong>éŠæˆ²è¦å‰‡ï¼š</strong>
                                        <ul className="list-disc pl-5 space-y-2 mt-2">
                                            <li>æ¯ä¸€è¼ªå°‡å‡ºç¾å…©ä½ã€Œç›¸åŒå°ˆæ¥­é ˜åŸŸã€çš„å€™é¸äººã€‚</li>
                                            <li>æ”¿é»¨ã€è³‡æ­·ä¸¦éçµ•å°çš„å¦æ±ºå› ç´ ã€‚</li>
                                            <li><span className="text-blue-600 font-bold">æ³¨æ„ï¼š</span>æ¯å€‹é¡åˆ¥ä¸­ï¼Œ<strong>è‡³å°‘æœ‰ä¸€ä½</strong>å€™é¸äººæ˜¯å¯ä»¥å¯©æŸ¥é€šéçš„ï¼ˆä¹Ÿå¯èƒ½å…©ä½éƒ½èƒ½éï¼‰ã€‚</li>
                                            <li>è«‹è©³è®€å€™é¸äººæè¿°ï¼Œé <strong>æ™ºæ…§</strong>åˆ¤æ–·èª°çš„äººå’Œè¼ƒä½³ã€è¡Œäº‹é¢¨æ ¼è¼ƒç©©å¥ï¼ŒæŒ‘é¸å‡ºéé—œæ©Ÿç‡æœ€é«˜çš„äººé¸ã€‚</li>
                                        </ul>
                                    </div>
                                </div>

                                <button 
                                    onClick={startGame}
                                    className="mt-8 w-full bg-amber-700 hover:bg-amber-800 text-white text-xl font-bold py-4 rounded shadow-lg transition-transform hover:scale-[1.02] flex items-center justify-center font-serif"
                                >
                                    <div className="flex justify-center items-center"><Vote className="mr-2" /> é–‹å§‹æå</div>
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Summary Screen */}
                    {gameState === 'summary' && (
                        <div className="flex-1 flex items-center justify-center p-4 z-10">
                            <div className="bg-white p-8 rounded-lg shadow-2xl border-t-8 border-slate-800 max-w-lg w-full text-center">
                                <h2 className="text-3xl font-bold font-serif mb-6 text-slate-800">æœ€çµ‚å¯©æŸ¥çµæœ</h2>
                                
                                <div className="py-8">
                                    <div className="text-6xl font-black mb-2 font-serif" style={{color: passedCount >= TARGET_PASSED ? '#16a34a' : '#dc2626'}}>
                                        {passedCount} <span className="text-2xl text-slate-400 font-normal">/ 10</span>
                                    </div>
                                    <div className="text-slate-500 font-bold tracking-widest uppercase">
                                        {passedCount >= TARGET_PASSED ? 'MISSION ACCOMPLISHED' : 'MISSION FAILED'}
                                    </div>
                                </div>

                                <p className="text-lg mb-8 text-slate-700 font-serif">
                                    {passedCount >= TARGET_PASSED 
                                        ? "æ­å–œï¼æ‚¨æ†‘è—‰è‘—ç²¾æº–çš„æ”¿æ²»åˆ¤æ–·èˆ‡æ™ºæ…§ï¼ŒæˆåŠŸçµ„æˆäº†æ–°çš„å…¬è¦–è‘£äº‹æœƒã€‚" 
                                        : "å¾ˆéºæ†¾ï¼Œå› é€šéäººæ•¸ä¸è¶³ï¼Œè‘£äº‹æœƒç„¡æ³•çµ„æˆï¼Œå°‡ç„¡é™æœŸå»¶å¾Œ..."}
                                </p>

                                <div className="text-left bg-slate-50 p-4 rounded mb-6 max-h-48 overflow-y-auto text-sm border border-slate-200">
                                    {history.map((h, i) => (
                                        <div key={i} className="flex justify-between py-1 border-b border-slate-100 last:border-0">
                                            <span className="text-slate-500">R{h.round} {h.candidate.name}</span>
                                            <span className={h.isPass ? 'text-green-600 font-bold' : 'text-red-400'}>
                                                {h.isPass ? 'é€šé' : 'é§å›'}
                                            </span>
                                        </div>
                                    ))}
                                </div>

                                <button 
                                    onClick={startGame}
                                    className="w-full bg-slate-800 hover:bg-slate-900 text-white font-bold py-3 rounded flex items-center justify-center transition-colors font-serif"
                                >
                                    <div className="flex justify-center items-center"><RefreshCw className="mr-2 w-4 h-4" /> é‡æ–°æŒ‘æˆ°</div>
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<PTSBoardSimulator />);
    </script>
</body>
</html>
